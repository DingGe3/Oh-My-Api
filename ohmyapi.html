<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oh My Api</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js"></script>
</head>

<body>

    <h1>Api使用情况统计</h1>

    <h2>访问数情况</h2>
    <div id="chart" style="width: 900px; height: 600px;"></div>
    <script>
        var mychart = document.getElementById('chart')
        var perday = echarts.init(mychart)

        fetch("./apiperday.json")
            .then(response => response.json())
            .then(data => {
                let dates = data.map(item => item["时间"]);

                let formattedDates = dates.map(date => {
            let dateObj = new Date(date); 
            let month = dateObj.getMonth() + 1; 
            let day = dateObj.getDate(); 
            return month + '-' + day;
        });
                let gpt4o = data.map(item => item["gpt-4o"]);
                let chatgpt4oLatest = data.map(item => item["chatgpt-4o-latest"]);
                let claude37Sonnet = data.map(item => item["claude-3-7-sonnet-20250219"]);
                let claude3Haiku = data.map(item => item["claude-3-haiku-20240307"]);
                let deepseekR1 = data.map(item => item["deepseek-r1"]);
                let deepseekV3 = data.map(item => item["deepseek-v3"]);
                let gemini15Pro = data.map(item => item["gemini-1.5-pro"]);
                let geminiPro15 = data.map(item => item["gemini-pro-1.5"]);

                let option = {
                    title:{text:"三月日访问量",
                     textStyle:{
                        color:'rgb(255, 0, 0)',
                        fontWeight: 'bold'
                    },
                },
                    tooltip:{trigger:'axis'},
                    legend: {
                        data: ['gpt-4o', 'chatgpt-4o-latest', 'claude-3-7-sonnet', 'claude-3-haiku', 'deepseek-r1', 'deepseek-v3', 'gemini-1.5-pro', 'gemini-pro-1.5'],
                        top: '5%'                        },
                    grid: {
                        top: '15%',  // 让整个图表往下移动
                        left: '10%',
                        right: '10%',
                        bottom: '15%'
                                                      },
                    xAxis:{type:'category',data:formattedDates},
                    yAxis:{type:'value'},
                    series:[{ name: 'gpt-4o', type: 'line', data: gpt4o },
                            { name: 'chatgpt-4o-latest', type: 'line', data: chatgpt4oLatest },
                            { name: 'claude-3-7-sonnet', type: 'line', data: claude37Sonnet },
                            { name: 'claude-3-haiku', type: 'line', data: claude3Haiku },
                            { name: 'deepseek-r1', type: 'line', data: deepseekR1 },
                            { name: 'deepseek-v3', type: 'line', data: deepseekV3 },
                            { name: 'gemini-1.5-pro', type: 'line', data: gemini15Pro },
                            { name: 'gemini-pro-1.5', type: 'line', data: geminiPro15 }]
                }
                perday.setOption(option);
            })
    </script>

    <h2>折线图</h2>
    <div id="demo1" style="width: 900px;height: 600px;"></div>
    <script>
        var mychart2 = document.getElementById('demo1')
        var perday2 = echarts.init(mychart2)

        fetch("./apipermonth.json")
            .then(response => response.json())
            .then(data => {
                let dates = data.map(item => item["月份"]);

                let formattedDates = dates.map(date => {
            let dateObj = new Date(date); 
            let month = dateObj.getMonth() + 1; 
            let day = dateObj.getDate(); 
            return month + '-' + day;
        });
                let gpt4o = data.map(item => item["gpt-4o"]);
                let chatgpt4oLatest = data.map(item => item["chatgpt-4o-latest"]);
                let claude37Sonnet = data.map(item => item["claude-3-7-sonnet-20250219"]);
                let claude3Haiku = data.map(item => item["claude-3-haiku-20240307"]);
                let deepseekR1 = data.map(item => item["deepseek-r1"]);
                let deepseekV3 = data.map(item => item["deepseek-v3"]);
                let gemini15Pro = data.map(item => item["gemini-1.5-pro"]);
                let geminiPro15 = data.map(item => item["gemini-pro-1.5"]);

                let option = {
                    title:{text:"月访问量",
                     textStyle:{
                        color:'rgb(255, 0, 0)',
                        fontWeight: 'bold'
                    },
                },
                    tooltip:{trigger:'axis'},
                    legend: {
                        data: ['gpt-4o', 'chatgpt-4o-latest', 'claude-3-7-sonnet', 'claude-3-haiku', 'deepseek-r1', 'deepseek-v3', 'gemini-1.5-pro', 'gemini-pro-1.5'],
                        top: '5%'                        },
                    grid: {
                        top: '15%',  // 让整个图表往下移动
                        left: '10%',
                        right: '10%',
                        bottom: '15%'
                                                      },
                    xAxis:{type:'category',data:formattedDates},
                    yAxis:{type:'value'},
                    series:[{ name: 'gpt-4o', type: 'line', data: gpt4o },
                            { name: 'chatgpt-4o-latest', type: 'line', data: chatgpt4oLatest },
                            { name: 'claude-3-7-sonnet', type: 'line', data: claude37Sonnet },
                            { name: 'claude-3-haiku', type: 'line', data: claude3Haiku },
                            { name: 'deepseek-r1', type: 'line', data: deepseekR1 },
                            { name: 'deepseek-v3', type: 'line', data: deepseekV3 },
                            { name: 'gemini-1.5-pro', type: 'line', data: gemini15Pro },
                            { name: 'gemini-pro-1.5', type: 'line', data: geminiPro15 }]
                }
                perday2.setOption(option);
            })
    </script>

    <h2>折线图</h2>
    <div>内容将在此显示</div>

</body>

</html>